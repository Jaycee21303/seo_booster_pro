{% extends "base.html" %}
{% block content %}

<div style="max-width:900px; margin:auto; text-align:center; padding:60px;">

    <h1 style="font-size:42px; color:#6A4CFF; font-weight:800;">
        Upgrade Your SEO Booster Plan
    </h1>

    <p style="max-width:560px; margin:auto; opacity:0.75; margin-bottom:40px;">
        Choose the plan that fits your needs. Free users get limited access with ads.
        Upgrade to remove limits and unlock full power.
    </p>

    <!-- ================================
         PLANS GRID
    ================================= -->
    <div style="
        display:flex;
        flex-wrap:wrap;
        justify-content:center;
        gap:30px;
    ">

        <!-- ==========================================
             FREE PLAN
        =========================================== -->
        <div style="
            background:white;
            padding:35px;
            width:300px;
            border-radius:16px;
            box-shadow:0 4px 12px rgba(0,0,0,0.08);
            border:2px solid #eee;
        ">
            <h2 style="font-size:26px; margin-bottom:10px;">Free Plan</h2>
            <p style="opacity:0.7; font-size:15px; margin-bottom:20px;">
                Simple analysis, ads, and monthly scan limits.
            </p>

            <ul style="list-style:none; padding:0; font-size:15px; text-align:left; margin-bottom:25px;">
                <li>✔ 2 scans per month</li>
                <li>✔ Competitor scan included</li>
                <li>✔ 1 PDF download per month</li>
                <li>✖ Ads removed</li>
                <li>✖ Unlimited scans</li>
            </ul>

            <a href="/dashboard"
                style="display:block; padding:12px; background:#eee; border-radius:10px; font-weight:600; text-decoration:none;">
                Continue Free
            </a>
        </div>

        <!-- ==========================================
             PRO PLAN
        =========================================== -->
        <div style="
            background:white;
            padding:35px;
            width:300px;
            border-radius:16px;
            box-shadow:0 4px 18px rgba(0,0,0,0.12);
            border:2px solid #6A4CFF;
        ">
            <h2 style="font-size:26px; margin-bottom:10px;">Pro Plan</h2>
            <p style="opacity:0.7; font-size:15px; margin-bottom:20px;">
                Unlimited access. No ads. Full power.
            </p>

            <h3 style="font-size:32px; margin-bottom:20px;">$4.99/month</h3>

            <ul style="list-style:none; padding:0; font-size:15px; text-align:left; margin-bottom:25px;">
                <li>✔ Unlimited scans</li>
                <li>✔ Full competitor analysis</li>
                <li>✔ Unlimited PDF exports</li>
                <li>✔ No ads</li>
            </ul>

            <button id="checkout-btn" onclick="startCheckout()" style="
                width:100%;
                padding:15px;
                background:#6A4CFF;
                color:white;
                border:none;
                border-radius:10px;
                font-size:17px;
                font-weight:700;
                cursor:pointer;
            ">
                Upgrade to Pro
            </button>
        </div>

        <!-- ==========================================
             SINGLE SCAN
        =========================================== -->
        <div style="
            background:white;
            padding:35px;
            width:300px;
            border-radius:16px;
            box-shadow:0 4px 12px rgba(0,0,0,0.08);
            border:2px solid #eee;
        ">
            <h2 style="font-size:26px; margin-bottom:10px;">Single Scan</h2>
            <p style="opacity:0.7; font-size:15px; margin-bottom:20px;">
                One full scan without upgrading.
            </p>

            <h3 style="font-size:32px; margin-bottom:20px;">$1.00</h3>

            <ul style="list-style:none; padding:0; font-size:15px; text-align:left; margin-bottom:25px;">
                <li>✔ One-time full scan</li>
                <li>✔ Works even if limit reached</li>
                <li>✔ Includes competitor scan</li>
                <li>✖ No additional PDF exports</li>
            </ul>

            <button onclick="singleScan()" style="
                width:100%;
                padding:15px;
                background:#444;
                color:white;
                border:none;
                border-radius:10px;
                font-size:17px;
                font-weight:700;
                cursor:pointer;
            ">
                Buy Single Scan
            </button>
        </div>

    </div>

    <br><br>
    <a href="/dashboard" style="display:block; opacity:0.6;">← Back to Dashboard</a>

</div>

<!-- Stripe JS -->
<script src="https://js.stripe.com/v3/"></script>

<script>
    // Initialize Stripe with LIVE key from Flask
    const stripe = Stripe("{{ stripe_public_key }}");

    function startCheckout() {
        const btn = document.getElementById("checkout-btn");
        btn.innerText = "Redirecting...";
        btn.style.opacity = "0.6";
        btn.style.pointerEvents = "none";

        fetch("/create-checkout-session", { method: "POST" })
        .then(r => r.json())
        .then(data => {
            if (data.sessionId) {
                return stripe.redirectToCheckout({ sessionId: data.sessionId });
            } else if (data.url) {
                window.location = data.url;
            } else {
                alert("Error: " + data.error);
                btn.innerText = "Upgrade to Pro";
                btn.style.opacity = "1";
                btn.style.pointerEvents = "auto";
            }
        })
        .catch(err => {
            alert("Stripe Error: " + err);
            btn.innerText = "Upgrade to Pro";
            btn.style.opacity = "1";
            btn.style.pointerEvents = "auto";
        });
    }

    function singleScan() {
        alert("Single Scan checkout not yet wired. We'll add Stripe logic next.");
    }
</script>

{% endblock %}

