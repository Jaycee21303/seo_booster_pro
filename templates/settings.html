{% extends "base.html" %}
{% block content %}
<h2 class="fw-bold mb-3">Settings</h2>
<div class="card p-4 shadow-sm">
    <div id="saveSuccess" 
         class="alert alert-success text-center" 
         style="display:none; opacity:0; transition:opacity 0.6s;">
        âœ… API Key Saved Successfully!
    </div>
    <form method="POST" onsubmit="showSavedMessage()">
        <label class="fw-bold">Your OpenAI API Key</label>
        <input type="text" 
               name="api_key" 
               value="{{ api_key or '' }}" 
               placeholder="Enter your OpenAI API Key"
               class="form-control mb-2" 
               required>
        <small>
            Need your API key?  
            <a href="https://platform.openai.com/account/api-keys" target="_blank">
                Click here to get it
            </a>
        </small>
        <button class="btn btn-primary mt-3">Save API Key</button>
    </form>
</div>
<script>
function showSavedMessage() {
    setTimeout(() => {
        const box = document.getElementById("saveSuccess");
        box.style.display = "block";
        setTimeout(() => box.style.opacity = 1, 50);
        setTimeout(() => {
            box.style.opacity = 0;
            setTimeout(() => box.style.display = "none", 600);
        }, 3000);
    }, 300);
}
</script>
{% endblock %}