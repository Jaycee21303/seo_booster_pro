{% extends "base.html" %}
{% block content %}

<style>
.settings-wrapper {
    max-width: 900px;
    margin: auto;
    padding: 30px 20px;
}

.card {
    background: white;
    border-radius: 14px;
    padding: 25px 30px;
    margin-bottom: 30px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.08);
}

.section-title {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 15px;
    color: #6A4CFF;
}

.value-box {
    background: #f8f7ff;
    padding: 12px 15px;
    border-radius: 10px;
    margin-top: 8px;
    border-left: 4px solid #6A4CFF;
}

.label {
    font-weight: 600;
    margin-bottom: 5px;
}

.upgrade-btn {
    display: inline-block;
    padding: 12px 20px;
    background: #6A4CFF;
    color: white;
    border-radius: 10px;
    font-weight: 700;
    margin-top: 12px;
    text-decoration: none;
}

.danger-btn {
    background: #ff4d4f;
    padding: 10px 16px;
    color: white;
    font-weight: 600;
    border-radius: 8px;
    text-decoration: none;
}

input[type="text"], 
input[type="password"], 
input[type="email"] {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
    margin-top: 6px;
}
</style>


<div class="settings-wrapper">

    <!-- HEADER -->
    <div class="card">
        <div class="section-title">âš™ Account Settings</div>

        <p><strong>Email:</strong> {{ user.email }}</p>
        <p>
            <strong>Plan:</strong>
            {% if user.is_pro %}
                <span style="color:#6A4CFF; font-weight:700;">PRO (Unlimited)</span>
            {% else %}
                <span style="color:#fa5252; font-weight:700;">Free Plan</span>
            {% endif %}
        </p>

        {% if not user.is_pro %}
        <a href="/pricing" class="upgrade-btn">Upgrade to Pro â†’</a>
        {% endif %}
    </div>


    <!-- LIMITS CARD -->
    <div class="card">
        <div class="section-title">ðŸ“Š Usage Limits</div>

        {% if user.is_pro %}
            <p class="label">Scans Per Month:</p>
            <div class="value-box">Unlimited</div>

            <p class="label">PDF Downloads:</p>
            <div class="value-box">Unlimited</div>

            <p class="label">Ads:</p>
            <div class="value-box">Hidden (Ad-Free Dashboard)</div>

        {% else %}
            <p class="label">Scans Remaining:</p>
            <div class="value-box">{{ 2 - (user.scans_used or 0) }} / 2 left</div>

            <p class="label">PDF Downloads:</p>
            <div class="value-box">{{ 1 - (user.pdf_downloads or 0) }} / 1 left</div>

            <p class="label">Ads:</p>
            <div class="value-box">Enabled</div>
        {% endif %}
    </div>


    <!-- API KEY CARD -->
    <div class="card">
        <div class="section-title">ðŸ”‘ API Key (Optional)</div>
        <p>You can store your own API key here for advanced integrations.</p>

        <form method="POST" action="/settings/save_api_key">
            <label class="label">Your API Key</label>
            <input type="text" name="api_key" value="{{ user.api_key or '' }}" placeholder="Enter API key...">

            <button class="upgrade-btn" style="margin-top:10px; background:#6A4CFF;">Save API Key</button>
        </form>
    </div>


    <!-- DELETE ACCOUNT -->
    <div class="card">
        <div class="section-title">ðŸ§¨ Danger Zone</div>
        <p>Deleting your account is permanent and cannot be undone.</p>

        <a href="/settings/delete_account" class="danger-btn">Delete My Account</a>
    </div>

</div>

{% endblock %}
