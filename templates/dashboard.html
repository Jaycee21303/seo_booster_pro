{% extends "base.html" %}
{% block content %}

<style>
    body {
        background: #f7f7fb;
        font-family: 'Inter', sans-serif;
        color: #222;
    }

    /* Top Navigation */
    .navbar {
        width: 100%;
        padding: 18px 40px;
        background: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 1px 4px rgba(0,0,0,0.07);
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .nav-left {
        font-size: 22px;
        font-weight: 700;
        color: #6A4CFF;
    }

    .nav-links a {
        margin-left: 25px;
        text-decoration: none;
        color: #333;
        font-weight: 500;
    }

    .nav-links a:hover {
        color: #6A4CFF;
    }

    /* Header Banner */
    .header-banner {
        width: 100%;
        padding: 50px 0;
        text-align: center;
        background: linear-gradient(135deg, #6A4CFF, #9C6BFF);
        color: white;
        margin-bottom: 35px;
    }

    .header-banner h1 {
        font-size: 42px;
        font-weight: 800;
        margin-bottom: 10px;
    }

    .header-banner p {
        font-size: 17px;
        opacity: 0.9;
    }

    /* Dashboard Container */
    .dashboard-container {
        max-width: 900px;
        margin: auto;
        padding: 20px;
    }

    /* Card */
    .card {
        background: white;
        border-radius: 14px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.08);
    }

    .section-title {
        font-size: 22px;
        font-weight: 600;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .input-row {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
    }

    input[type="url"], input[type="text"] {
        padding: 12px 14px;
        border: 1px solid #ccc;
        border-radius: 8px;
        flex: 1;
        font-size: 15px;
    }

    .run-btn {
        padding: 12px 18px;
        border: none;
        border-radius: 8px;
        background: #6A4CFF;
        color: white;
        font-size: 15px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.2s;
    }

    .run-btn:hover {
        background: #5330e9;
    }

    /* Circular Score */
    .score-wrapper {
        position: relative;
        width: 160px;
        height: 160px;
        margin: auto;
    }

    .progress-ring-bg {
        opacity: 0.25;
    }

    .progress-ring-fill {
        transform: rotate(-90deg);
        transform-origin: 50% 50%;
        transition: stroke-dashoffset 1.2s ease, stroke 0.6s ease;
    }

    .score-number {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -52%);
        font-size: 38px;
        font-weight: 700;
        color: #333;
    }
</style>


<!-- NAVIGATION -->
<div class="navbar">
    <div class="nav-left">SEO Booster Pro</div>
    <div class="nav-links">
        <a href="/dashboard">Dashboard</a>
        <a href="/settings">Settings</a>
        <a href="/logout">Logout</a>
    </div>
</div>

<!-- HEADER -->
<div class="header-banner">
    <h1>SEO Dashboard</h1>
    <p>Instant AI-powered insights to improve your rankings and visibility</p>
</div>

<!-- MAIN -->
<div class="dashboard-container">

    <!-- SEO Analyzer -->
    <div class="card">
        <div class="section-title">üîç SEO Analyzer</div>

        <form method="POST">
            <div class="input-row">
                <input type="url" name="website_url"
                       placeholder="Website URL (required)" required>

                <input type="text" id="manual-keyword" name="keyword"
                       placeholder="Keyword (optional)" style="display:none;">

                <button class="run-btn" type="submit">Run SEO Analysis</button>
            </div>

            <small style="color:#6A4CFF; cursor:pointer;"
                onclick="
                    document.getElementById('manual-keyword').style.display='block';
                    this.style.display='none';
                ">
                + Add keyword manually (optional)
            </small>
        </form>

        {% if suggested_keywords %}
        <div style="margin-top:15px;">
            <strong>Suggested Keywords:</strong><br><br>
            {% for kw in suggested_keywords %}
                <span style="background:#eee; padding:6px 12px; margin:4px;
                             display:inline-block; border-radius:8px; font-size:14px;">
                    {{ kw }}
                </span>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- Keyword Score with Circle -->
    <div class="card">
        <div class="section-title">üìà Keyword Score</div>

        <div class="score-wrapper">
            <svg class="progress-ring" width="160" height="160">
                <circle class="progress-ring-bg" stroke="#cccccc" stroke-width="12"
                    fill="transparent" r="70" cx="80" cy="80"/>
                <circle class="progress-ring-fill" stroke="#4CAF50" stroke-width="12"
                    stroke-linecap="round" fill="transparent" r="70" cx="80" cy="80"/>
            </svg>

            <div class="score-number" id="scoreNumber">
                {{ keyword_score or 0 }}
            </div>
        </div>
    </div>

    <!-- Site Audit -->
    <div class="card">
        <div class="section-title">üßπ Site Audit</div>
        {{ site_audit or "Results will appear here‚Ä¶" }}
    </div>

    <!-- Optimization Tips -->
    <div class="card">
        <div class="section-title">üí° Optimization Tips</div>
        {{ optimization_tips or "Results will appear here‚Ä¶" }}
    </div>

</div>

<!-- SCORE SCRIPT -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const score = parseInt("{{ keyword_score or 0 }}");
    const circle = document.querySelector('.progress-ring-fill');
    const radius = circle.r.baseVal.value;
    const circumference = radius * 2 * Math.PI;

    circle.style.strokeDasharray = `${circumference} ${circumference}`;
    circle.style.strokeDashoffset = circumference;

    const offset = circumference - (score / 100) * circumference;
    circle.style.strokeDashoffset = offset;

    // Color transitions
    if (score < 40) circle.style.stroke = "#ff4a4a";      // red
    else if (score < 70) circle.style.stroke = "#ffb400"; // yellow
    else circle.style.stroke = "#4CAF50";                 // green

    // Update number
    document.getElementById("scoreNumber").innerText = score;
});
</script>

{% endblock %}
